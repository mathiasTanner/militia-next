{"version":3,"sources":["turbopack:///[project]/web/src/lib/strapi.ts","turbopack:///[project]/web/src/app/page.tsx"],"sourcesContent":["type NextFetchInit = RequestInit & {\r\n  next?: { revalidate?: number | false; tags?: string[] }\r\n  cache?: RequestCache\r\n};\r\n\r\n// Local dev (browser & server):\r\n//   NEXT_PUBLIC_API_URL=http://localhost:1337\r\n// Production (server):\r\n//   INTERNAL_STRAPI_URL=http://127.0.0.1:4001\r\n// Production (client):\r\n//   same-origin '/api/...'\r\n\r\nconst isBrowser = typeof window !== 'undefined';\r\n\r\nconst API_BASE =\r\n  process.env.NODE_ENV !== 'production'\r\n    ? (process.env.NEXT_PUBLIC_API_URL ?? 'http://localhost:1337')\r\n    : (isBrowser\r\n        ? '' // client → same-origin (proxy will route /api to Strapi)\r\n        : (process.env.INTERNAL_STRAPI_URL ?? 'http://127.0.0.1:4001') // server → talk to Strapi directly\r\n      );\r\n\r\nexport async function fetchStrapi(path: string, opts?: NextFetchInit) {\r\n  const url = `${API_BASE}${path}`; // e.g. '/api/posts?...'\r\n  const res = await fetch(url, { next: { revalidate: 60 }, ...opts });\r\n  if (!res.ok) throw new Error(`Strapi error ${res.status}`);\r\n  return res.json();\r\n}\r\n","export const dynamic = 'force-dynamic';\nimport { fetchStrapi } from '@/lib/strapi';\n\nexport default async function Home() {\n  const data = await fetchStrapi('/api/posts?populate=cover&sort=publishedAt:desc');\n  const posts = data?.data ?? [];\n\n  return (\n    <main className=\"home\">\n      <h1>News</h1>\n      <ul className=\"post-list\">\n        {posts.map((p: any) => {\n          console.log(p)\n          return (\n            <li key={p.id} className=\"post-item\">\n              <a href={`/posts/${p.post}`} className=\"post-title\">\n                {p.title}\n              </a>\n              {p.exerpt && <p className=\"post-excerpt\">{p.exerpt}</p>}\n            </li>\n          );\n        })}\n      </ul>\n    </main>\n  );\n}"],"names":[],"mappings":"wTAcA,IAAM,EAKK,QAAQ,CAJjB,EAIoB,CAAC,mBAAmB,EAAI,cAHxC,UAGiE,AAGhE,eAAe,CALf,CAK2B,CAAY,CAAE,CAAoB,EAClE,IAAM,EAAM,CAAA,EAAG,EAAA,EAJyF,AAI9E,EAAA,CAAM,CAC1B,CAD4B,CACtB,MAAM,MAAM,CANhB,CAMqB,CAAE,KAAM,CAAE,EADmB,SACP,EAAG,EAAG,CAN9C,EAMiD,CAAI,AAAC,GACjE,GAAI,CAAC,EAAI,EAAE,CAAE,MAAM,AAAI,MAAM,CAAC,aAAa,EAAE,EAAI,MAAM,CAAA,CAAE,EACzD,EARoE,KAQ7D,EAAI,IAAI,EACjB,CCxBe,eAAe,IAC5B,IAAM,EAAO,MAAM,EAAY,mDACzB,EAAQ,GAAM,MAAQ,EAAE,CAE9B,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,iBACd,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,SACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACX,EAAM,GAAG,CAAC,AAAC,IACV,QAAQ,GAAG,CAAC,GAEV,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAc,UAAU,sBACvB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAM,CAAC,OAAO,EAAE,EAAE,IAAI,CAAA,CAAE,CAAE,UAAU,sBACpC,EAAE,KAAK,GAET,EAAE,MAAM,EAAI,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wBAAgB,EAAE,MAAM,KAJ3C,EAAE,EAAE,QAWzB,kCAzBuB"}